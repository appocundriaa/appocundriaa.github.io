<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marco Marino</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="header">
    <div class="header-grid">
      <div></div>

      <div class="header-content">

        <!-- BIO -->
        <p class="bio" id="bioText">
          Marco Marino moves between products and words, strategy and concept design. A
          designer and independent researcher. He studies the intersection strategies between
          fashion and art worlds. With a BA in Fashion Design and Multimedia Arts from IUAV in
          Venice, he now pursues an MA in Fashion Strategy at UNIBO. He lends his voice and
          vision to brands and institutions, shaping images and concepts. Navigates between
          practice and theory. Writes, sometimes for webzines, sometimes for those who ask,
          sometimes just to see what happens.
        </p>

        <p class="descriptor">Strategy, Special Projects, Writer, Image...</p>

        <!-- CONTATTI -->
        <div class="contact-wrapper">
          <div class="contact-link-wrapper">
            <a class="link" href="mailto:mmarino1@iuav.it">mmarino1@iuav.it</a>
            <span class="sep">|</span>
            <a class="link" href="https://www.instagram.com/appocundriaa/" target="_blank" rel="noreferrer">
              @appocundriaa ↗
            </a>
            <span class="sep">|</span>
            <a class="link" href="https://www.linkedin.com/in/marco-marino-219237100/" target="_blank" rel="noreferrer">
              linkedin ↗
            </a>
          </div>
        </div>

        <!-- FILTRI (NO BOX GRIGIO) -->
        <section class="filters" aria-label="Filtri">
          <div class="filter-panel" id="filterPanel">

            <!-- LINEA (solo 1, togglable) -->
            <svg class="filter-line" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
              <path id="linkLine" d="" fill="none"></path>
            </svg>

            <div class="filter-cols">
              <div class="filter-col" id="categoryCol" aria-label="Categorie">
                <button class="pill is-active" data-filter="Strategy" type="button">STRATEGY</button>
                <button class="pill" data-filter="Special Projects" type="button">SPECIAL PROJECTS</button>
                <button class="pill" data-filter="Visual and Concept" type="button">VISUAL AND CONCEPT</button>
                <button class="pill" data-filter="Publication" type="button">PUBLICATION</button>
                <button class="pill" data-filter="Writer" type="button">WRITER</button>
              </div>

              <div class="filter-col" id="tagCol" aria-label="Tags">
                <button class="pill is-active" data-filter="Fashion" type="button">FASHION</button>
                <button class="pill" data-filter="Art" type="button">ART</button>
                <button class="pill" data-filter="Culture" type="button">CULTURE</button>
                <button class="pill" data-filter="Education" type="button">EDUCATION</button>
                <button class="pill" data-filter="Product" type="button">PRODUCT</button>
              </div>
            </div>

          </div>
        </section>

      </div>

      <div></div>
    </div>
  </header>

  <main class="page-content">
    <!-- ✅ BOX GRIGIO SOLO QUI -->
    <section class="work-panel" aria-label="Lavori">
      <article class="work-row" data-category="Writer" data-tags="Fashion,Art,Culture" data-label="IMAGE">
        <div class="work-year">2025</div>
        <div class="work-title">
          <a class="work-link" href="#" target="_blank" rel="noreferrer">
            NSS —→ The Utopia of The Row’s resort 2026 collection
          </a>
        </div>
        <div class="work-label">
          <a class="work-label-link" href="#" target="_blank" rel="noreferrer">IMAGE</a>
        </div>
      </article>

      <div class="work-year-only">2024</div>
      <div class="work-year-only">2023</div>
      <div class="work-year-only">2022</div>
      <div class="work-year-only">2021</div>
      <div class="work-year-only">2020</div>
      <div class="work-year-only">2019</div>

      <footer class="footer">
        <p>Web dvlp: Edo – Marco Marino 2026</p>
      </footer>
    </section>
  </main>

  <script>
    // =========================
    // STATE: linea togglable
    // - click categoria: seleziona, linea OFF
    // - click tag: seleziona, linea ON; se riclicchi lo stesso tag => toggle OFF
    // =========================

    function normTags(raw){
      return (raw || '').split(',').map(s => s.trim()).filter(Boolean);
    }

    function setActive(groupEl, value){
      groupEl.querySelectorAll('.pill').forEach(btn => {
        btn.classList.toggle('is-active', btn.dataset.filter === value);
      });
    }

    function getActive(groupSel){
      return document.querySelector(groupSel + ' .pill.is-active')?.dataset.filter || '';
    }

    function updateList(){
      const cat = getActive('#categoryCol');
      const tag = getActive('#tagCol');

      document.querySelectorAll('.work-row').forEach((row) => {
        const c = row.getAttribute('data-category') || '';
        const tags = normTags(row.getAttribute('data-tags'));
        row.style.display = (c === cat && tags.includes(tag)) ? '' : 'none';
      });
    }

    function randomLineColor(){
      const hue = Math.floor(Math.random() * 360);
      const sat = 70 + Math.random() * 25;
      const light = 35 + Math.random() * 20;
      return `hsl(${hue} ${sat}% ${light}%)`;
    }

    function pct(fr, x, y){
      return {
        x: ((x - fr.left) / fr.width) * 100,
        y: ((y - fr.top) / fr.height) * 100
      };
    }

    function drawLineIfOn(){
      const panel = document.getElementById('filterPanel');
      const path = document.getElementById('linkLine');
      const catCol = document.getElementById('categoryCol');
      const tagCol = document.getElementById('tagCol');
      if (!panel || !path || !catCol || !tagCol) return;

      if (!window.__lineOn){
        path.setAttribute('d','');
        return;
      }

      const a = catCol.querySelector('.pill.is-active');
      const b = tagCol.querySelector('.pill.is-active');
      if (!a || !b){
        path.setAttribute('d','');
        return;
      }

      const fr = panel.getBoundingClientRect();
      const ra = a.getBoundingClientRect();
      const rb = b.getBoundingClientRect();

      // ✅ attacco: bordo destro categoria + bordo sinistro tag
      const start = pct(fr, ra.right, ra.top + ra.height/2);
      const end   = pct(fr, rb.left,  rb.top + rb.height/2);

      // curva “pulita”
      const dx = Math.max(0.001, end.x - start.x);
      const c1x = start.x + dx * 0.45;
      const c1y = start.y;
      const c2x = end.x - dx * 0.45;
      const c2y = end.y;

      path.style.stroke = randomLineColor();
      path.setAttribute('d',
        `M ${start.x.toFixed(2)} ${start.y.toFixed(2)} ` +
        `C ${c1x.toFixed(2)} ${c1y.toFixed(2)} ${c2x.toFixed(2)} ${c2y.toFixed(2)} ${end.x.toFixed(2)} ${end.y.toFixed(2)}`
      );
    }

    function initFilters(){
      const catCol = document.getElementById('categoryCol');
      const tagCol = document.getElementById('tagCol');
      if (!catCol || !tagCol) return;

      window.__lineOn = false;
      updateList();
      drawLineIfOn();

      catCol.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-filter]');
        if (!btn) return;

        setActive(catCol, btn.dataset.filter);

        // ✅ cambi categoria => linea OFF finché non clicchi un tag
        window.__lineOn = false;

        updateList();
        drawLineIfOn();
      });

      tagCol.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-filter]');
        if (!btn) return;

        const currentTag = getActive('#tagCol');
        const nextTag = btn.dataset.filter;

        // se clicchi lo stesso tag e la linea è ON => toggle OFF
        if (currentTag === nextTag && window.__lineOn){
          window.__lineOn = false;
        } else {
          setActive(tagCol, nextTag);
          window.__lineOn = true;
        }

        updateList();
        drawLineIfOn();
      });

      window.addEventListener('resize', () => {
        drawLineIfOn();
      });
    }

    initFilters();
  </script>
</body>
</html>
