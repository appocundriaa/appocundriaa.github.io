<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marco Marino</title>

  <!-- General Sans -->
  <link href="https://api.fontshare.com/v2/css?f[]=general-sans@400,500,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>

<body class="default">

  <header class="header">
    <div class="header-grid">
      <div class="spacer"></div>

      <div class="header-content">

        <!-- BIO: cerchio perfetto via shape-outside -->
        <div class="bio-circle" aria-label="Bio">
          <div class="bio-circle__shape">
            <!-- i due elementi sotto sono “stampini” invisibili che creano il cerchio -->
            <span class="shape-left" aria-hidden="true"></span>
            <span class="shape-right" aria-hidden="true"></span>

            <!-- TESTO (visibile) -->
            <p class="bio-text">
              È un Sironi! Tra i più famosi. Pubblicato su tutti i cataloghi. È del periodo pessimista! Il più raro. Questo se t'o attacchi in ufficio c'hai uno scatto da così a così! Te lo metti in casa, fai un figurone! Io ce l'ho avuto in salotto per vent'anni, tu non sai quanto m'ha aiutato a me, le serate che m'ha risolto... perché è anche un argomento di conversazione, sai? C'è pure chi dice: se c'ha 'e zinne viola, de che colore c'avrà er culo?
            </p>
          </div>
        </div>

        <!-- CONTATTI -->
        <div class="contact-wrapper">
          <p class="role">Editor, writer, historian &amp;c.</p>
          <div class="contact-link-wrapper">
            <a class="link" href="mailto:mmarino1@iuav.it">mmarino1@iuav.it</a>
            <span class="sep">|</span>
            <a class="link" href="https://www.instagram.com/appocundriaa/" target="_blank" rel="noreferrer">
              @appocundriaa ↗
            </a>
            <span class="sep">|</span>
            <a class="link" href="#" target="_blank" rel="noreferrer">substack.com ↗</a>
          </div>
        </div>

        <!-- FILTRI + connettore -->
        <section class="filters" id="filters" aria-label="Filtri">

          <div class="filter-stack" id="filterStack">
            <!-- SVG overlay per la “freccia hand-drawn” -->
            <svg id="filterConnector" class="filter-connector" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
              <path id="filterConnectorPath" d="" fill="none"></path>
            </svg>

            <div class="filter-group" data-filter-group="category" id="categoryGroup">
              <button class="pill" data-filter="Essay" type="button">Essay</button>
              <button class="pill" data-filter="Speaking" type="button">Speaking</button>
              <button class="pill" data-filter="Editing" type="button">Editing</button>
              <button class="pill is-active" data-filter="Journalism" type="button">Journalism</button>
            </div>

            <div class="filter-group" data-filter-group="tag" id="tagGroup">
              <button class="pill is-active" data-filter="Fashion" type="button">Fashion</button>
              <button class="pill" data-filter="Art" type="button">Art</button>
              <button class="pill" data-filter="Culture" type="button">Culture</button>
              <button class="pill" data-filter="Design" type="button">Design</button>
              <button class="pill" data-filter="History" type="button">History</button>
            </div>
          </div>
        </section>

      </div>

      <div class="spacer"></div>
    </div>
  </header>

  <main class="page-content">
    <section class="work-grid" aria-label="Lavori">

      <article class="work-row" data-category="Journalism" data-tags="Fashion,Design">
        <div class="work-year">2025</div>
        <div class="work-title">
          <a class="work-link" href="#" target="_blank" rel="noreferrer">
            Behind the Campaign @ Miu Miu with Lengua ↗
          </a>
        </div>
        <div class="work-spacer"></div>
      </article>

      <article class="work-row" data-category="Journalism" data-tags="Fashion,Design">
        <div class="work-year">2025</div>
        <div class="work-title">
          <a class="work-link" href="#" target="_blank" rel="noreferrer">
            An Interview with Evan Kinori @ 1 Granary ↗
          </a>
        </div>
        <div class="work-spacer"></div>
      </article>

      <article class="work-row" data-category="Journalism" data-tags="Fashion,Culture">
        <div class="work-year">2025</div>
        <div class="work-title">
          <a class="work-link" href="#" target="_blank" rel="noreferrer">
            Trend Forecasters on Predicting the Future @ 1 Granary ↗
          </a>
        </div>
        <div class="work-spacer"></div>
      </article>

    </section>

    <footer class="footer">
      <p>© 2026 – Marco Marino</p>
    </footer>

    <script>
      // ------------------------------------------------------------
      // FILTRI: default Journalism + Fashion (no ALL)
      // ------------------------------------------------------------
      (function filtersAndConnector() {
        const state = { category: 'Journalism', tag: 'Fashion' };

        const categoryGroup = document.getElementById('categoryGroup');
        const tagGroup = document.getElementById('tagGroup');

        const normTags = (raw) => (raw || '')
          .split(',')
          .map(s => s.trim())
          .filter(Boolean);

        const setActive = (groupEl, value) => {
          groupEl.querySelectorAll('.pill').forEach(btn => {
            btn.classList.toggle('is-active', btn.dataset.filter === value);
          });
        };

        const updateList = () => {
          document.querySelectorAll('.work-row').forEach((row) => {
            const c = row.getAttribute('data-category') || '';
            const tags = normTags(row.getAttribute('data-tags'));

            const okC = c === state.category;
            const okT = tags.includes(state.tag);

            row.style.display = (okC && okT) ? '' : 'none';
          });
        };

        function onClick(groupEl, key) {
          groupEl.addEventListener('click', (e) => {
            const btn = e.target.closest('button[data-filter]');
            if (!btn) return;
            state[key] = btn.dataset.filter;
            setActive(groupEl, state[key]);
            updateList();
            drawConnector();
          });
        }

        onClick(categoryGroup, 'category');
        onClick(tagGroup, 'tag');

        setActive(categoryGroup, state.category);
        setActive(tagGroup, state.tag);
        updateList();

        // ------------------------------------------------------------
        // “Freccia” più hand-drawn (jitter)
        // ------------------------------------------------------------
        const stackEl = document.getElementById('filterStack');
        const svg = document.getElementById('filterConnector');
        const path = document.getElementById('filterConnectorPath');

        function centerOf(el) {
          const r = el.getBoundingClientRect();
          return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
        }

        function drawConnector() {
          const a = categoryGroup.querySelector('.pill.is-active');
          const b = tagGroup.querySelector('.pill.is-active');

          if (!a || !b) { path.setAttribute('d', ''); return; }

          const fr = stackEl.getBoundingClientRect();
          const p1 = centerOf(a);
          const p2 = centerOf(b);

          const x1 = ((p1.x - fr.left) / fr.width) * 100;
          const y1 = ((p1.y - fr.top) / fr.height) * 100;
          const x2 = ((p2.x - fr.left) / fr.width) * 100;
          const y2 = ((p2.y - fr.top) / fr.height) * 100;

          // curva base
          const midX = (x1 + x2) / 2;
          const midY = (y1 + y2) / 2;

          // jitter deterministico (dipende da x1,x2 così è stabile)
          const seed = Math.abs(Math.sin((x1 + 13) * 12.9898 + (x2 + 7) * 78.233)) * 43758.5453;
          const j = (n) => (Math.sin(seed + n) * 0.9);

          // punti “a mano” (simile alla tua foto: un po' su/giù, più organico)
          const pA = { x: x1, y: y1 };
          const pB = { x: midX - 10 + j(1)*2, y: midY - 18 + j(2)*3 };
          const pC = { x: midX + 10 + j(3)*2, y: midY + 14 + j(4)*3 };
          const pD = { x: x2, y: y2 };

          // path con curve quadratiche concatenate
          const d = `
            M ${pA.x} ${pA.y}
            Q ${pB.x} ${pB.y} ${midX} ${midY}
            Q ${pC.x} ${pC.y} ${pD.x} ${pD.y}
          `;

          path.setAttribute('d', d);

          // aggiorna viewBox effettivo (non serve ma mantiene pulito)
          svg.setAttribute('viewBox', '0 0 100 100');
        }

        window.addEventListener('resize', drawConnector);
        drawConnector();
      })();
    </script>

  </main>
</body>
</html>
